--TABLE OBJECTS

CREATE TABLE OBJECTS(
  OBJECT_ID Long NOT NULL,
  OBJECT_TYPE_ID Long,
  PARENT_ID Long
);
ALTER TABLE OBJECTS ADD CONSTRAINT Key1 PRIMARY KEY (OBJECT_ID);

--TABLE OBJECT_TYPES

CREATE TABLE OBJECT_TYPES(
  OBJECT_TYPE_ID Long NOT NULL,
  NAME Varchar2(40 ) NOT NULL,
  PARENT_ID Long
);
ALTER TABLE OBJECT_TYPE ADD CONSTRAINT Key2 PRIMARY KEY (OBJECT_TYPE_ID);

-- Table PARAMS

CREATE TABLE PARAMS(
  PARAM_ID Long NOT NULL,
  OBJECT_ID Long NOT NULL,
  ATTRIBUTE_ID Long NOT NULL,
  INTEGER_VALUE Integer,
  DECIMAL_VALUE Float,
  STRING_VALUE Varchar2(1000 ),
  XML_VALUE XMLType,
  DATE_VALUE Date,
  LIST_ID Long,
  REFERENCES_OBJECT Long,
  REFERENCES_PARAM Long,
  DATA Blob
);
ALTER TABLE PARAMS ADD CONSTRAINT Key3 PRIMARY KEY (PARAM_ID);

-- Table ATTRIBUTES

CREATE TABLE ATTRIBUTES(
  ATTRIBUTE_ID Long NOT NULL,
  NAME Varchar2(40 ) NOT NULL,
  TYPE_NAME Char(20 ) NOT NULL
);
ALTER TABLE ATTRIBUTES ADD CONSTRAINT Key4 PRIMARY KEY (ATTRIBUTE_ID);

-- Table ATTRIBUTE_TYPES

CREATE TABLE ATTRIBUTE_TYPES(
  TYPE_NAME Char(20 ) NOT NULL
);
ALTER TABLE ATTRIBUTE_TYPES ADD CONSTRAINT Key5 PRIMARY KEY (TYPE_NAME);

-- Table LIST_TYPE

CREATE TABLE LIST_TYPE(
  LIST_ID Long NOT NULL,
  VALUE Varchar2(1000 ),
  ATTRIBUTE_ID Long
);
ALTER TABLE LIST_TYPE ADD CONSTRAINT Key6 PRIMARY KEY (LIST_ID);

-- Table OBJECT_TYPE_ATTRIBUTES

CREATE TABLE OBJECT_TYPE_ATTRIBUTES(
  OBJECT_TYPE_ID Long NOT NULL,
  ATTRIBUTE_ID Long NOT NULL
);
ALTER TABLE OBJECT_TYPE_ATTRIBUTES ADD CONSTRAINT Key7 PRIMARY KEY (OBJECT_TYPE_ID,ATTRIBUTE_ID);

-- Table REFERENSE_ATTRIBUTES

CREATE TABLE REFERENSE_ATTRIBUTES(
  REFERENCES_ID Long NOT NULL,
  OBJECT_ID Long,
  OBJECT_TYPE_ID Long
);
ALTER TABLE REFERENSE_ATTRIBUTES ADD CONSTRAINT Key12 PRIMARY KEY (REFERENCES_ID);

-- Create relationships section ------------------------------------------------- 

ALTER TABLE OBJECTS ADD CONSTRAINT  FOREIGN KEY (OBJECT_TYPE_ID) REFERENCES OBJECT_TYPE (OBJECT_TYPE_ID);

ALTER TABLE PARAMS ADD CONSTRAINT  FOREIGN KEY (ATTRIBUTE_ID) REFERENCES ATTRIBUTES (ATTRIBUTE_ID);

ALTER TABLE ATTRIBUTES ADD CONSTRAINT  FOREIGN KEY (TYPE_NAME) REFERENCES ATTRIBUTE_TYPES (TYPE_NAME);

ALTER TABLE OBJECT_TYPE ADD CONSTRAINT  FOREIGN KEY (FK_OBJECT_TYPE_ID) REFERENCES OBJECT_TYPE (OBJECT_TYPE_ID);

ALTER TABLE OBJECTS ADD CONSTRAINT  FOREIGN KEY (FK_object_id) REFERENCES OBJECTS (OBJECT_ID);

ALTER TABLE OBJECT_TYPE_ATTRIBUTES ADD CONSTRAINT  FOREIGN KEY (OBJECT_TYPE_ID) REFERENCES OBJECT_TYPE (OBJECT_TYPE_ID);

ALTER TABLE OBJECT_TYPE_ATTRIBUTES ADD CONSTRAINT  FOREIGN KEY (ATTRIBUTE_ID) REFERENCES ATTRIBUTES (ATTRIBUTE_ID);

ALTER TABLE PARAMS ADD CONSTRAINT  FOREIGN KEY (OBJECT_ID) REFERENCES OBJECTS (OBJECT_ID);

ALTER TABLE PARAMS ADD CONSTRAINT  FOREIGN KEY (LIST_ID) REFERENCES LIST_TYPE (LIST_ID);

ALTER TABLE REFERENSE_ATTRIBUTES ADD CONSTRAINT  FOREIGN KEY (OBJECT_ID) REFERENCES OBJECTS (OBJECT_ID);

ALTER TABLE REFERENSE_ATTRIBUTES ADD CONSTRAINT  FOREIGN KEY (OBJECT_TYPE_ID) REFERENCES OBJECT_TYPE (OBJECT_TYPE_ID);

ALTER TABLE PARAMS ADD CONSTRAINT  FOREIGN KEY (REFERENCES_PARAM) REFERENCES REFERENSE_ATTRIBUTES (REFERENCES_ID);

ALTER TABLE LIST_TYPE ADD CONSTRAINT  FOREIGN KEY (ATTRIBUTE_ID) REFERENCES ATTRIBUTES (ATTRIBUTE_ID);

ALTER TABLE PARAMS ADD CONSTRAINT  FOREIGN KEY (REFERENCES_OBJECT) REFERENCES OBJECTS (OBJECT_ID);